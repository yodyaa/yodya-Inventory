<!DOCTYPE html>
<html lang="th">

<head>
  <meta charset="UTF-8" />
  <title>Dashboard ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="firebase-config.js"></script>

</head>
<body class="bg-gray-100 min-h-screen flex">
  <aside class="w-64 bg-[#174D27]  p-6">
    <h1 class="text-white text-md font-bold mb-6">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏Ñ‡∏∑‡∏ô & ‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πà‡∏≠‡∏°</h1>
    <nav class="space-y-4">
      <a href="./Dashboard.html" class="block bg-[#CADEC3] text-[#174D27] py-2 px-4 rounded">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
      <a href="./Devices.html" class="block bg-[#CADEC3] text-[#174D27] py-2 px-4 rounded">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</a>
      <a href="./User.html" class="block bg-[#CADEC3] text-[#174D27] py-2 px-4 rounded">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
      <a href="./Setting.html"
        class="block bg-[#174D27] border border-[#CADEC3] text-white py-2 px-4 rounded">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</a>
    </nav>
  </aside>
  <!-- Main content -->
  <main class="flex-1 p-6 space-y-8">
    <!-- Summary Boxes -->
    <div id="summaryBoxes" class="grid grid-cols-2 sm:grid-cols-4 gap-4"></div>

    <!-- ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô -->
    <section>
      <h2 class="text-2xl font-bold mb-4">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô</h2>
      <div id="borrowCards" class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
    </section>

    <!-- ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
    <section>
      <h2 class="text-2xl font-bold mb-4">‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</h2>
      <div class="space-y-4">
        <!-- ‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î -->
        <!-- ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏∑‡∏° -->
        <div class="flex items-center space-x-2">
          <span class="w-40">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô : ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°</span>
          <input id="empBorrowTime" type="time" class="border p-1 rounded" />
          <button onclick="saveTime('empBorrowTime','empBorrowMsg')"
            class="px-3 py-1 bg-[#174D27] text-white rounded">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button onclick="notifyEmpBorrowNow()" class="px-3 py-1 bg-green-600 text-white rounded">‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
          <span id="empBorrowMsg" class="text-sm text-yellow-500"></span>
        </div>
        <!-- ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏∑‡∏ô (1) -->
        <div class="flex items-center space-x-2">
          <span class="w-40">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÅ‡∏™‡∏Å‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå </span>
          <input id="empReturnTime1" type="time" class="border p-1 rounded" />
          <button onclick="saveTime('empReturnTime1','empReturnMsg1')"
            class="px-3 py-1 bg-[#174D27] text-white rounded">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button onclick="notifyEmpReturnNow()" class="px-3 py-1 bg-green-600 text-white rounded">‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
          <span id="empReturnMsg1" class="text-sm text-yellow-500"></span>
        </div>
        <!-- ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏∑‡∏ô (2) -->
        <div class="flex items-center space-x-2">
          <span class="w-40">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÅ‡∏™‡∏Å‡∏ô‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå</span>
          <input id="empReturnTime2" type="time" class="border p-1 rounded" />
          <button onclick="saveTime('empReturnTime2','empReturnMsg2')"
            class="px-3 py-1 bg-[#174D27] text-white rounded">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button onclick="notifyEmpReturnNow()" class="px-3 py-1 bg-green-600 text-white rounded">‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
          <span id="empReturnMsg2" class="text-sm text-yellow-500"></span>
        </div>
        <!-- Admin: ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏∑‡∏° -->
        <div class="flex items-center space-x-2">
          <span class="w-40">Admin: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
          <input id="adminBorrowTime" type="time" class="border p-1 rounded" />
          <button onclick="saveTime('adminBorrowTime','adminBorrowMsg')"
            class="px-3 py-1 bg-[#174D27] text-white rounded">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button onclick="notifyAdminBorrowNow()" class="px-3 py-1 bg-green-600 text-white rounded">‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
          <span id="adminBorrowMsg" class="text-sm text-yellow-500"></span>
        </div>
        <!-- Admin: ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∑‡∏ô -->
        <div class="flex items-center space-x-2">
          <span class="w-40">Admin:‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô</span>
          <input id="adminReturnTime" type="time" class="border p-1 rounded" />
          <button onclick="saveTime('adminReturnTime','adminReturnMsg')"
            class="px-3 py-1 bg-[#174D27] text-white rounded">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
          <button onclick="notifyAdminReturnNow()" class="px-3 py-1 bg-green-600 text-white rounded">‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
          <span id="adminReturnMsg" class="text-sm text-yellow-500"></span>
        </div>
      </div>

      <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤ -->
      <div class="mt-4">
        <button onclick="clearTimes()" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition">
          ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤
        </button>
      </div>

    </section>

  </main>

  <script>
    const TIMEZONE = 'Asia/Bangkok';

    // Load borrowed devices realtime
    let devicesByUser = {};
    function updateSummary() {
      const loaners = Object.keys(devicesByUser).length;
      const borrowed = Object.values(devicesByUser).reduce((s, u) => s + u.items.length, 0);
      document.getElementById('summaryBoxes').innerHTML = `
        <div class="bg-white p-4 rounded shadow text-center">
          <div class="text-2xl font-bold">${loaners}</div>
          <div class="text-sm">‡∏ú‡∏π‡πâ‡∏¢‡∏∑‡∏°</div>
        </div>
        <div class="bg-white p-4 rounded shadow text-center">
          <div class="text-2xl font-bold">${borrowed}</div>
          <div class="text-sm">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô</div>
        </div>
      `;
    }
    function loadBorrowed() {
      db.ref('devices').on('value', snap => {
        devicesByUser = {};
        snap.forEach(ch => {
          const d = ch.val();
          if (d.status === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô' && d.lastUserId) {
            if (!devicesByUser[d.lastUserId]) devicesByUser[d.lastUserId] = { name: d.lastUser, items: [] };
            devicesByUser[d.lastUserId].items.push({ id: d.deviceId, name: d.deviceName });
          }
        });
        renderBorrowed();
        updateSummary();
      });
    }
    function renderBorrowed() {
      const cont = document.getElementById('borrowCards'); cont.innerHTML = '';
      Object.entries(devicesByUser).forEach(([uid, u]) => {
        const list = u.items.map(i => `‚Ä¢ ${i.id} : ${i.name}`).join('<br>');
        const card = document.createElement('div'); card.className = 'bg-white p-4 rounded shadow';
        card.innerHTML = `<div class="flex justify-between items-center">
            <h3 class="font-semibold">${u.name}</h3>
            <button onclick="notifyOne('${uid}','${u.name}','${u.items.map(i => i.id + ':' + i.name).join(', ')}')"
              class="bg-red-500 text-white px-3 py-1 rounded text-xs">üîî</button>
          </div><div class="mt-2 text-sm">${list}</div>`;
        cont.appendChild(card);
      });
    }
    loadBorrowed();
    // Utility
    function todayDate() {
      return new Date().toLocaleDateString('en-CA', { timeZone: TIMEZONE });
    }
    function sendToGAS(uid, msg) {
      fetch('https://script.google.com/macros/s/AKfycbwMyWlJ3lu9oKdxIPWaZldMFKz9JcPF2Ugan4HQy8Lgq9nTT8kDsNRIgre3SpXgCqbB/exec', { method: 'POST', body: JSON.stringify({ userId: uid, message: msg }) });
    }
    function notifyOne(uid, name, list) { sendToGAS(uid, `üîî ‡∏Ñ‡∏∏‡∏ì ${name} ‡∏Ñ‡∏∑‡∏ô: ${list}`); }
    function saveTime(id, msgId) {
      const t = document.getElementById(id).value; if (!t) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤');
      localStorage.setItem(id, t); document.getElementById(msgId).textContent = `‡πÅ‡∏à‡πâ‡∏á‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ ${t}`;
    }
    ['empBorrowTime', 'empReturnTime1', 'empReturnTime2', 'adminBorrowTime', 'adminReturnTime']
      .forEach(id => { const v = localStorage.getItem(id); if (v) document.getElementById(id).value = v; });
    setInterval(() => {
      const now = new Date().toTimeString().slice(0, 5);
      if (localStorage.getItem('empBorrowTime') === now) notifyEmpBorrowNow();
      if (['empReturnTime1', 'empReturnTime2'].some(i => localStorage.getItem(i) === now)) notifyEmpReturnNow();
      if (localStorage.getItem('adminBorrowTime') === now) notifyAdminBorrowNow();
      if (localStorage.getItem('adminReturnTime') === now) notifyAdminReturnNow();
    }, 60000);

    // Notification functions
    function notifyEmpBorrowNow() {
      // 1) ‡∏™‡∏£‡πâ‡∏≤‡∏á ISO-string ‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô
      const today = new Date();
      const startOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate());
      const startISO = startOfDay.toISOString();

      const endOfDay = new Date(startOfDay);
      endOfDay.setDate(endOfDay.getDate() + 1);
      const endISO = endOfDay.toISOString();
      db.ref('borrowRecords')
        .orderByChild('date')
        .startAt(startISO)
        .endAt(endISO)
        .once('value')
        .then(snap => {
          snap.forEach(ch => {
            const e = ch.val();
            sendToGAS(e.userId, `üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ: \n${e.deviceId}:${e.deviceName}`);
          });
        });
    }
    function notifyEmpReturnNow() {
      // ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏∑‡∏ô‡∏à‡∏≤‡∏Å devices
      db.ref('devices').once('value').then(snap => {
        const pend = {};
        snap.forEach(ch => {
          const d = ch.val();
          if (d.status === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô' && d.lastUserId) {
            pend[d.lastUserId] = pend[d.lastUserId] || [];
            pend[d.lastUserId].push(`${d.deviceId}: ${d.deviceName}`);
          }
        });
        Object.entries(pend).forEach(([uid, items]) => {
          sendToGAS(uid, `üîî ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏Ñ‡∏∑‡∏ô:\n${items.join(', ')}`);
        });
      });
    }
    function fetchAdmins() {
      return db.ref('employees')
        .orderByChild('role')
        .equalTo('Admin')        // ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö Database ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        .once('value')
        .then(snapshot => {
          const admins = [];
          snapshot.forEach(ch => {
            const u = ch.val();
            if (u.userIdLine) admins.push(u.userIdLine);
          });
          return admins;
        });
    }
    function notifyAdminBorrowNow() {
      // 1) ‡∏™‡∏£‡πâ‡∏≤‡∏á ISO-string ‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô
      const today = new Date();
      const startOfDay = new Date(today.getFullYear(), today.getMonth(), today.getDate());
      const startISO = startOfDay.toISOString();

      const endOfDay = new Date(startOfDay);
      endOfDay.setDate(endOfDay.getDate() + 1);
      const endISO = endOfDay.toISOString();

      Promise.all([
        fetchAdmins(),
        db.ref('borrowRecords')
          .orderByChild('date')
          .startAt(startISO)
          .endAt(endISO)
          .once('value')
      ]).then(([admins, snap]) => {
        // ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°...
        const summary = {};
        snap.forEach(ch => {
          const e = ch.val();
          summary[e.userName] = summary[e.userName] || [];
          // ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô deviceName ‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÅ‡∏ó‡∏ô deviceId
          summary[e.userName].push(`${e.deviceId}: ${e.deviceName}`);
        });
        const lines = Object.entries(summary).map(([name, names]) =>
          `${name}\n${names.map(n => `- ${n}`).join('\n')}`
        );
        const txt = lines.length
          ? lines.join('\n\n')
          : '‚Äî ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‚Äî';
        admins.forEach(id =>
          sendToGAS(id, `üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏∑‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ:\n\n${txt}`)
        );
      });
    }

    // --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏à‡πâ‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô (‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà 2) ---
    function notifyAdminReturnNow() {
      Promise.all([
        fetchAdmins(),
        db.ref('devices').once('value')
      ]).then(([admins, snap]) => {
        const pending = {};
        snap.forEach(ch => {
          const d = ch.val();
          if (d.status === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô') {
            pending[d.lastUser] = pending[d.lastUser] || [];
            pending[d.lastUser].push(`${d.deviceId}: ${d.deviceName}`);
          }
        });
        const lines = Object.entries(pending).map(([name, ids]) =>
          `${name}\n${ids.map(id => `- ${id}`).join('\n')}`
        );
        const txt = lines.length
          ? lines.join('\n\n')
          : '‚Äî ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô ‚Äî';
        admins.forEach(id =>
          sendToGAS(id, `‚ö†Ô∏è ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏∑‡∏ô:\n\n${txt}`)
        );
      });
    }
    function clearTimes() {
      // (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏ö
      if (!confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏ö‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) return;

      // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ID ‡∏Ç‡∏≠‡∏á input ‡πÅ‡∏•‡∏∞ message span
      const timeIds = [
        'empBorrowTime', 'empReturnTime1', 'empReturnTime2',
        'adminBorrowTime', 'adminReturnTime'
      ];
      timeIds.forEach(id => {
        // ‡∏•‡∏ö‡∏à‡∏≤‡∏Å localStorage
        localStorage.removeItem(id);
        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï input value
        const inp = document.getElementById(id);
        if (inp) inp.value = '';
      });
      // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
      ['empBorrowMsg', 'empReturnMsg1', 'empReturnMsg2', 'adminBorrowMsg', 'adminReturnMsg']
        .forEach(msgId => {
          const sp = document.getElementById(msgId);
          if (sp) sp.textContent = '';
        });
    }

  </script>
</body>

</html>
